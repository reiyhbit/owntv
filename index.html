<!doctype html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="referrer" content="no-referrer">
<link rel="icon" href="data:image/x-icon;,">
<title>github.com/dbghelp</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.11.2/controls.min.css">
<link rel="stylesheet" href="https://dbghelp.github.io/xml-epg.css">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  display: flex;
  height: 100vh;
  background-color: #282c34;
  overflow: hidden;
}

/* Playlist sidebar (narrow version) */
#playlist {
  width: 240px;
  background-color: #282c34;
  color: #fff;
  overflow-y: auto;
  border-right: 1px solid #444;
  padding: 10px;
  box-shadow: 2px 0 5px rgb(0 0 0 / 0.2);
  display: flex;
  flex-direction: column;
  transition: width 0.3s ease;
}

#url-input,
#search-input {
  width: 100%;
  padding: 7px;
  margin-bottom: 8px;
  border: 1px solid #444;
  border-radius: 5px;
  background-color: #3c4043;
  color: #fff;
  font-size: 0.85em;
  box-sizing: border-box;
}

#fetch-button,
#epg-button,
#upload-button {
  width: 100%;
  padding: 8px;
  margin-bottom: 8px;
  background-color: #61dafb;
  color: #000;
  border: none;
  border-radius: 5px;
  font-size: 0.85em;
  cursor: pointer;
  box-shadow: 0 4px 8px rgb(0 0 0 / 0.3);
}

#fetch-button:hover,
#epg-button:hover,
#upload-button:hover {
  background-color: #4fa3c4;
}

/* Video area */
#video-container {
  flex: 1;
  display: flex;
  flex-direction: column;
  z-index: 2;
}

#video {
  flex: 1;
  width: 100%;
  height: 100%;
  background-color: #000;
}

/* Channel list (smaller design) */
#video-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

#video-list li {
  padding: 6px;
  margin: 3px 0;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.3s ease, transform 0.2s ease;
  display: flex;
  align-items: center;
  font-size: 0.85em;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

#video-list li:hover {
  background-color: #61dafb;
  transform: scale(1.03);
}

#video-list img {
  width: 32px;
  height: 32px;
  margin-right: 6px;
  border-radius: 5px;
  object-fit: contain;
}

.active {
  background-color: #4fa3c4;
}

/* Overlay and EPG */
#overlay {
  display: none;
  flex-direction: column;
  align-items: center;
  overflow-y: auto;
  z-index: 2;
  flex: 1;
}

#epg-container {
  display: none;
  z-index: 1000;
  position: fixed;
  width: 100%;
  height: 100%;
  overflow: scroll;
  background-color: #282c34;
}

/* Make playlist narrower on smaller screens */
@media (max-width: 768px) {
  #playlist {
    width: 120px;
    padding: 6px;
  }

  #video-list li {
    font-size: 0.7em;
    padding: 5px;
  }

  #video-list img {
    width: 28px;
    height: 28px;
    margin-right: 4px;
  }

  #fetch-button, #epg-button, #upload-button {
    font-size: 0.75em;
    padding: 6px;
  }

  #url-input, #search-input {
    font-size: 0.75em;
    padding: 6px;
  }
}
</style>

<div id="playlist">
  <div class="input-container">
    <input id="url-input" placeholder="Enter M3U8 Playlist URL">
    <input id="file-input" type="file" style="display:none">
    <button id="upload-button" onclick='document.getElementById("file-input").click()'>â†‘</button>
  </div>
  <button id="fetch-button">Load Playlist</button>
  <button id="epg-button" onclick="openEPG()">EPG</button>
  <input id="search-input" placeholder="Search...">
  <ul id="video-list"></ul>
</div>

<div id="video-container">
  <video autoplay controls id="video"></video>
</div>

<div id="overlay"></div>
<div id="epg-container"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.11/shaka-player.compiled.js"></script>
<script src="https://dbghelp.github.io/M3U8Interpreter.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.4/pako.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://dbghelp.github.io/xml-epg.js"></script>

<script>
// Original JS logic unchanged
</script>
</html>
